---
title: 01线代基础
published: 2025-08-21T20:27:19Z
description: ''
image: ''
tags: [Computer Graphics, Linear Algebra]
category: 'Computer Graphics'
draft: false
---

# 线代基础

## 1. 点积
$$
\mathbf{a} \cdot \mathbf{b} = \|\mathbf{a}\| \|\mathbf{b}\| \cos \theta
$$

**用途：**
1. 计算投影：对于**基本正交基，投影可以通过点积直接计算**。
2. 计算夹角：**判断方向是否相同**。
3. 向量投影分解：可以将一个向量分解到其他向量的方向上。


**向量表示：**
$$
\mathbf{a} \cdot \mathbf{b} = \sum_{i=1}^{n} a_{i} b_{i}
$$


## 2. 叉积
$$
\mathbf{a} \times \mathbf{b} = \|\mathbf{a}\| \|\mathbf{b}\| \sin \theta
$$

根据右手螺旋法则，可以确定叉积的方向。

叉积可以将原有的二维向量提升到三维空间。

**用途：**

1. 判断**向量垂直**：可以通过计算叉积的结果是否为零来判断。
2. 判断**向量在另一个向量的左右**：对于右手坐标系，向量A在向量B的左侧时，A叉B的结果为正，反之为负数。
3. 判断**点在图形内部还是外部**：可以通过计算点到逆时针边的叉积来判断，（做光栅化，给三角形内部的像素着色需要用到。）
    > 示例：对于三角形ABC，内部存在点P。我们可以取边AB, BC, CA，分别计算AB×AP, BC×BP, CA×CP，如果三个叉积的结果符号相同，则点P在三角形内部，否则在外部。
4. 计算**法向量**

**向量表示：**
$$
\mathbf{a} \times \mathbf{b} = \begin{vmatrix}
\mathbf{i} & \mathbf{j} & \mathbf{k} \\
a_{1} & a_{2} & a_{3} \\
b_{1} & b_{2} & b_{3}
\end{vmatrix} = 
\begin{pmatrix}
a_{2}b_{3} - a_{3}b_{2} \\
a_{3}b_{1} - a_{1}b_{3} \\
a_{1}b_{2} - a_{2}b_{1}
\end{pmatrix}
$$

## 3. 矩阵变换

### 1. 缩放变换

$$
\begin{pmatrix}
x' \\
y' \\
z'
\end{pmatrix} =
\begin{pmatrix}
s_{x} & 0 & 0 \\
0 & s_{y} & 0 \\
0 & 0 & s_{z}
\end{pmatrix}
\begin{pmatrix}
x \\
y \\
z
\end{pmatrix}
$$

缩放变换的矩阵为对角阵，在对角线上元素$s_x, s_y, s_z$为缩放因子，其他元素为0。

+ 归一化的缩放：
+ 非归一化的缩放：

### 2. 翻转矩阵

$$
\begin{pmatrix}
x' \\
y' \\
z'
\end{pmatrix} =
\begin{pmatrix}
-1 & 0 & 0 \\
0 & -1 & 0 \\
0 & 0 & 1
\end{pmatrix}
\begin{pmatrix}
x \\
y \\
z
\end{pmatrix}
$$

公式所示的矩阵，表示的是对称翻转变换。Z轴保持不变，X轴和Y轴翻转。


### 3. 切变矩阵(Shear Matrix)

$$
\begin{pmatrix}
x' \\
y' \\
z'
\end{pmatrix} =
\begin{pmatrix}
1 & sh_{xy} & sh_{xz} \\
sh_{yx} & 1 & sh_{yz} \\
sh_{zx} & sh_{zy} & 1
\end{pmatrix}
\begin{pmatrix}
x \\
y \\
z
\end{pmatrix}
$$

切变矩阵中的系数$sh_{ij}$表示沿着第i个轴方向的切变量，随着第j个轴的方向产生偏移(shift)。

![01线代基础-2025-08-22-10-33-07](https://cdn.jsdelivr.net/gh/chrisnake11/picgo@main/blog/01线代基础-2025-08-22-10-33-07.png)

> 例如：点(1, 1)，经过[[1, a], [0, 1]]变换后，变为(1 + a, 1)。表示y每增加1，x也会偏移a个单位。

+ 切边矩阵是线性变换，平行线仍然平行。
+ 面积保持不变，但是形状会倾斜。

### 4. 旋转变换

$$
\begin{pmatrix}
x' \\
y' \\
z'
\end{pmatrix} =
\begin{pmatrix}
\cos \theta & -\sin \theta & 0 \\
\sin \theta & \cos \theta & 0 \\
0 & 0 & 1
\end{pmatrix}
\begin{pmatrix}
x \\
y \\
z
\end{pmatrix}
$$

公式中的旋转矩阵表示，绕Z轴的旋转变换。旋转角度为$\theta$，逆时针方向为正。

![01线代基础-2025-08-22-10-25-30](https://cdn.jsdelivr.net/gh/chrisnake11/picgo@main/blog/01线代基础-2025-08-22-10-25-30.png)

可以看到，对于(1, 0)点，经过旋转变换后，变为$(\cos \theta, \sin \theta)$。而对于(0, 1)点，变为$(-\sin \theta, \cos \theta)$。就可以分别定义出旋转矩阵的第一列和第二列。

> 注：在尝试构建矩阵时，可以分别找到图形中的两个点(0,1), (1, 0)作为示例，通过观察它们在变换前后的位置来推导出变换矩阵。

### 5. 平移变换

$$
\begin{pmatrix}
x' \\
y' \\
z'
\end{pmatrix} =
M \begin{pmatrix}
x \\
y \\
z
\end{pmatrix} + 
\begin{pmatrix}
t_{x} \\
t_{y} \\
t_{z}
\end{pmatrix}
$$

显然，平移变换需要加上一个向量，这并不是一个线性变换。

为了用一个合适的方法表示上面所有的变换（包括平移变换），引入了**齐次坐标**。

### 6. 齐次坐标

在原有的2D或3D坐标中，**增加一个额外的维度**，称为齐次坐标。

+ 二维点：$(x, y) \rightarrow (x, y, 1)$
+ 二维向量: $(x, y) \rightarrow (x, y, 0)$ 

对于二维坐标$(x, y)$，齐次坐标表示为$(x, y, 1)$；对于三维坐标$(x, y, z)$，齐次坐标表示为$(x, y, z, 1)$。

这样，二维下的平移变换的矩阵表示为：

$$
\begin{pmatrix}
x' \\
y' \\
1
\end{pmatrix} =
\begin{pmatrix}
1 & 0 & t_{x} \\
0 & 1 & t_{y} \\
0 & 0 & 1
\end{pmatrix}
\begin{pmatrix}
x \\
y \\
1
\end{pmatrix} = 
\begin{pmatrix}
x + t_{x} \\
y + t_{y} \\
1
\end{pmatrix}
$$

> 由于向量具有平移不变性，因此向量的额外维度为0.

![01线代基础-2025-08-22-11-03-47](https://cdn.jsdelivr.net/gh/chrisnake11/picgo@main/blog/01线代基础-2025-08-22-11-03-47.png)

**齐次坐标的扩充定义**：

![01线代基础-2025-08-22-11-06-10](https://cdn.jsdelivr.net/gh/chrisnake11/picgo@main/blog/01线代基础-2025-08-22-11-06-10.png)

那么点加点的结果，在齐次坐标下就表示两个点的中点。及$\left(\frac{x + x'}{2}, \frac{y + y'}{2}, 1\right)$


### 仿射变换(Affine Transformation)

仿射变换是**保持点、直线、平面之间的相对位置关系的变换**。它可以通过线性变换和位移变换的组合来实现。

在齐次坐标下，仿射变换可以表示为：

$$
\begin{pmatrix}
x' \\
y' \\
z'
\end{pmatrix} =
\begin{pmatrix}
M & t \\
0 & 1
\end{pmatrix}
\begin{pmatrix}
x \\
y \\
z \\
1
\end{pmatrix}
$$

其中，$M$是一个线性变换矩阵，$t$是一个平移向量。

因此：仿射变换表示为先进行线性变换，再进行平移变换。

